# Wrangler configuration for ADC Chat 2029 with Authentication

name = "adc-chat-2029-auth"
main = "workers/index-auth.js"
compatibility_date = "2024-01-01"

# D1 Database binding
[[d1_databases]]
binding = "DB"
database_name = "adc-chat-2029-db"
database_id = "your-database-id-here"  # Will be set after creating the database

# Durable Objects binding
[[durable_objects.bindings]]
name = "CHAT_ROOM"
class_name = "ChatRoom"
script_name = "adc-chat-2029-auth"

# Durable Objects migration
[[migrations]]
tag = "v1"
new_classes = ["ChatRoom"]

# Environment variables
[vars]
APP_URL = "https://adc-chat-2029-auth.pages.dev"
ENVIRONMENT = "production"

# Secrets (set using: wrangler secret put JWT_SECRET)
# JWT_SECRET = "your-secret-key-here"

# Auth worker (separate service for authentication endpoints)
[[services]]
binding = "AUTH"
service = "adc-chat-2029-auth-api"

# Routes for Cloudflare Pages
[[routes]]
pattern = "adc-chat-2029-auth.pages.dev/*"
